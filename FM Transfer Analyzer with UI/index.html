<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FM Transfer Analyzer Pro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- FM24 Style Background -->
    <div class="fm-background">
        <!-- Navigation Bar -->
        <nav class="fm-nav">
            <div class="nav-brand">
                <span class="nav-logo">‚öΩ</span>
                <span class="nav-title">FM Transfer Analyzer Pro</span>
            </div>
            <div class="nav-actions">
                <button class="nav-btn" onclick="showPremiumModal()">
                    <span class="premium-icon">üëë</span> Go Pro
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="fm-container">
            <!-- Upload Section -->
            <div class="upload-section" id="uploadSection">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="gradient-text">Analyze Your Squad</span>
                        <span class="hero-subtitle">Professional transfer analysis for Football Manager</span>
                    </h1>
                    
                    <div class="hero-actions">
                        <button class="cta-btn primary" onclick="loadDemoData()">
                            <span class="btn-icon">üöÄ</span>
                            <span class="btn-text">
                                <strong>Try Demo Squad</strong>
                                <small>Liverpool FC Analysis</small>
                            </span>
                        </button>
                        
                        <button class="cta-btn secondary" onclick="showUploadZone()">
                            <span class="btn-icon">üìÅ</span>
                            <span class="btn-text">
                                <strong>Upload Save File</strong>
                                <small>Analyze your squad</small>
                            </span>
                        </button>
                    </div>

                    <div class="features-preview">
                        <div class="feature-item">
                            <span class="feature-icon">üìä</span>
                            <span>Squad Valuation</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚≠ê</span>
                            <span>Player Ratings</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üí∞</span>
                            <span>Market Analysis</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üéØ</span>
                            <span>Transfer Insights</span>
                        </div>
                    </div>
                </div>

                <!-- Upload Zone (Hidden) -->
                <div class="upload-zone" id="uploadZone" style="display: none;">
                    <div class="upload-area">
                        <div class="upload-icon">üìÅ</div>
                        <h3>Drop your save file here</h3>
                        <p>Supports .fm, .save, and .dat files</p>
                        <input type="file" id="fileInput" accept=".fm,.save,.dat" style="display: none;">
                        <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                            Choose File
                        </button>
                    </div>
                    <button class="back-link" onclick="hideUploadZone()">‚Üê Back to options</button>
                </div>
            </div>

            <!-- Progress Section -->
            <div class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-card">
                    <div class="progress-icon">‚öôÔ∏è</div>
                    <h2>Analyzing Squad...</h2>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p id="progressText">Loading player data...</p>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <!-- Header -->
                <div class="results-header">
                    <div class="header-left">
                        <h1 id="squadTitle">Liverpool FC Squad Analysis</h1>
                        <p class="header-subtitle">Complete squad breakdown and market analysis</p>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn" onclick="loadDemoData()">
                            üîÑ New Analysis
                        </button>
                        <button class="action-btn" onclick="goBack()">
                            ‚Üê Back
                        </button>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card primary">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalPlayers">21</div>
                            <div class="stat-label">Squad Size</div>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalValue">‚Ç¨850M</div>
                            <div class="stat-label">Total Value</div>
                        </div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-content">
                            <div class="stat-number" id="avgAge">25.2</div>
                            <div class="stat-label">Avg Age</div>
                        </div>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-content">
                            <div class="stat-number" id="starPlayers">8</div>
                            <div class="stat-label">Star Players</div>
                        </div>
                    </div>
                </div>

                <!-- Filter Tabs -->
                <div class="filter-tabs">
                    <button class="tab-btn active" onclick="showTab('all', this)">
                        All Players
                    </button>
                    <button class="tab-btn" onclick="showTab('valuable', this)">
                        Most Valuable
                    </button>
                    <button class="tab-btn" onclick="showTab('young', this)">
                        Young Talents
                    </button>
                    <button class="tab-btn" onclick="showTab('contracts', this)">
                        Contracts Expiring
                    </button>
                </div>

                <!-- Players Table -->
                <div class="table-container">
                    <table class="players-table">
                        <thead>
                            <tr>
                                <th>Player</th>
                                <th>Age</th>
                                <th>Position</th>
                                <th>CA</th>
                                <th>PA</th>
                                <th>Value</th>
                                <th>Contract</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="playersTableBody">
                            <!-- Players will be populated here -->
                        </tbody>
                    </table>
                </div>

                <!-- Export Actions -->
                <div class="export-actions">
                    <button class="export-btn" onclick="exportToCSV()">
                        üìÑ Export CSV
                    </button>
                    <button class="export-btn premium" onclick="showPremiumModal()">
                        üëë Premium Report
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Premium Modal -->
    <div class="modal-overlay" id="premiumModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closePremiumModal()">√ó</button>
            <div class="modal-header">
                <h2>üöÄ Unlock Premium Features</h2>
                <p>Get the most out of your FM experience</p>
            </div>
            <div class="premium-features">
                <div class="feature">‚úÖ Unlimited squad analysis</div>
                <div class="feature">‚úÖ Advanced transfer recommendations</div>
                <div class="feature">‚úÖ Contract negotiation insights</div>
                <div class="feature">‚úÖ Market value predictions</div>
                <div class="feature">‚úÖ Custom scouting reports</div>
                <div class="feature">‚úÖ Export to Excel/PDF</div>
            </div>
            <div class="pricing-plans">
                <div class="plan">
                    <div class="plan-name">Monthly</div>
                    <div class="plan-price">$9.99</div>
                    <button class="plan-btn">Choose Plan</button>
                </div>
                <div class="plan featured">
                    <div class="plan-badge">Most Popular</div>
                    <div class="plan-name">Yearly</div>
                    <div class="plan-price">$99.99</div>
                    <div class="plan-savings">Save 17%</div>
                    <button class="plan-btn">Choose Plan</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>

    <!-- Stripe Integration -->
<script src="https://js.stripe.com/v3/"></script>

<!-- Load our new modules -->
<script src="saveFileParser.js"></script>
<script src="subscriptionManager.js"></script>
<script src="app.js"></script>

</body>
</html>