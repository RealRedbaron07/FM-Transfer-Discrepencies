<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESPN API Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #0a0e1a;
            color: #ffffff;
        }
        .test-section {
            background: #1a1f2e;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #374151;
        }
        .btn {
            background: #4a90e2;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover {
            background: #357abd;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background: rgba(16, 185, 129, 0.1); color: #10b981; }
        .error { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
        .info { background: rgba(74, 144, 226, 0.1); color: #4a90e2; }
    </style>
</head>
<body>
    <h1>ESPN API Integration Test</h1>
    
    <div class="test-section">
        <h2>API Configuration</h2>
        <input type="password" id="api-token" placeholder="Enter your Apify API token" style="width: 300px; padding: 8px; margin: 10px 0;">
        <br>
        <button class="btn" onclick="testInitialization()">Test Initialization</button>
        <button class="btn" onclick="testFetchNews()">Test Fetch News</button>
        <div id="status"></div>
    </div>
    
    <div class="test-section">
        <h2>Results</h2>
        <div id="results"></div>
    </div>

    <script src="espn-api.js"></script>
    <script>
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        async function testInitialization() {
            const token = document.getElementById('api-token').value;
            if (!token) {
                showStatus('Please enter an API token first', 'error');
                return;
            }

            try {
                showStatus('Initializing ESPN API...', 'info');
                const success = await window.espnAPI.initialize(token);
                if (success) {
                    showStatus('ESPN API initialized successfully!', 'success');
                } else {
                    showStatus('Failed to initialize ESPN API', 'error');
                }
            } catch (error) {
                showStatus('Error: ' + error.message, 'error');
            }
        }

        async function testFetchNews() {
            const token = document.getElementById('api-token').value;
            if (!token) {
                showStatus('Please enter an API token first', 'error');
                return;
            }

            try {
                showStatus('Fetching transfer news...', 'info');
                const newsItems = await window.espnAPI.fetchTransferNews();
                const resultsDiv = document.getElementById('results');
                
                resultsDiv.innerHTML = `
                    <h3>Found ${newsItems.length} transfer news items:</h3>
                    <div style="max-height: 400px; overflow-y: auto;">
                        ${newsItems.map(item => `
                            <div style="border: 1px solid #374151; padding: 10px; margin: 10px 0; border-radius: 4px;">
                                <strong>${item.title}</strong><br>
                                <small>${item.description}</small><br>
                                <small>Source: ${item.source}</small>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                showStatus(`Successfully fetched ${newsItems.length} news items!`, 'success');
            } catch (error) {
                showStatus('Error fetching news: ' + error.message, 'error');
            }
        }
    </script>
</body>
</html> 